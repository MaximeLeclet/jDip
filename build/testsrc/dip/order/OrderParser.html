<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_0) on Tue Dec 08 18:21:09 CET 2009 -->
<TITLE>
OrderParser
</TITLE>

<META NAME="date" CONTENT="2009-12-08">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="OrderParser";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../dip/order/OrderFormatOptions.html" title="class in dip.order"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../dip/order/OrderWarning.html" title="class in dip.order"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?dip/order/OrderParser.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="OrderParser.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
dip.order</FONT>
<BR>
Class OrderParser</H2>
<map id="G" name="G">
<area shape="rect" href="./OrderParser.html" title="dip.order.OrderParser" alt="" coords="16,11,792,99"/>
</map>
<!-- UML diagram added by UMLGraph version 5.2 (http://www.umlgraph.org/) -->
<div align="center"><img src="OrderParser.png" alt="Package class diagram package OrderParser" usemap="#G" border=0/></div>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>dip.order.OrderParser</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>OrderParser</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Parses text to create an Order object.
        <p>
        NOTE: this code is rather hackish (and in no way reflective of the 
        rest of the code base). It is not expandable, or modular. However, it
        is a pretty flexible parser in terms of what it will accept. As a point 
        of history, it's the first piece of code written for jDip.
        <p>
        I am gradually replacing the most crusty parts with better code. For example, Coast now
        normalizes coasts with regular expressions, and the code is far cleaner.
        <p>
        In the future, I anticipate we will have some sort of command-normalization (Order.normalize)
        which will be implemented by Order subclasses, and some sort of pattern matching
        that will allow the order to be matched to the tokens. This will allow Order classes to be modfied
        or added without rewriting the OrderParser.
        <p>
        <b>note:</b> The parser is extremely tolerant of misspellings in single-word provinces. However,
        it is not at all tolerant of multiword province misspellings. This is because it cannot easily 
        recognize multi-word provinces. A pattern based parser could, and would be more robust in this
        regard.
        <p>
        <pre>
        HOLD:
        <power>: <type> <s-prov> h 
        
        MOVE, RETREAT:
        <power>: <type> <s-prov> m <d-prov>
        <power>: m <s-prov> (to) <d-prov>
        
        SUPPORT:
        <power>: <type> <s-prov> s <type> <s-prov>
        <power>: <type> <s-prov> s <type> <s-prov> m <d-prov>
        
        CONVOY:
        <power>: <type> <s-prov> c <type> <s-prov> m <d-prov>
        
        DISBAND:        
        <power>: <type> <s-prov> d 

        BUILD:  
        <power>: <build> <type> <s-prov>

        REMOVE: 
        <power>: <remove> <type> <s-prov> 
        

        Where: 

        <type> = "army", "a", "fleet", "f" or <empty>
        <s-prov> = Source province.
        <d-prov> = Destination province.
        <power> = Power name or abbreviation of two or more characters.
        <holds> = "h", "hold", "holds", "stand", "stands".
        <moves> = "-", "->", "=>", "m", "move", "moves", "move to", "moves to".
        <support> = "s", "support", "supports".
        <convoy> = "c", "convoy", "convoys".
        <disband> = "d", "disband".
        <build> = "b", "build"
        <remove> = "r", "remove" 

        </pre>
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../dip/order/OrderParser.html" title="class in dip.order">OrderParser</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../dip/order/OrderParser.html#getInstance()">getInstance</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Gets an OrderParser instance</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../dip/order/Order.html" title="class in dip.order">Order</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../dip/order/OrderParser.html#parse(dip.order.OrderFactory, java.lang.String, dip.world.Power, dip.world.TurnState, boolean, boolean)">parse</A></B>(<A HREF="../../dip/order/OrderFactory.html" title="class in dip.order">OrderFactory</A>&nbsp;orderFactory,
      java.lang.String&nbsp;text,
      <A HREF="../../dip/world/Power.html" title="class in dip.world">Power</A>&nbsp;power,
      <A HREF="../../dip/world/TurnState.html" title="class in dip.world">TurnState</A>&nbsp;turnState,
      boolean&nbsp;locked,
      boolean&nbsp;guess)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parse an order to an Order object.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getInstance()"><!-- --></A><H3>
getInstance</H3>
<PRE>
public static <A HREF="../../dip/order/OrderParser.html" title="class in dip.order">OrderParser</A> <B>getInstance</B>()</PRE>
<DL>
<DD>Gets an OrderParser instance
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="parse(dip.order.OrderFactory, java.lang.String, dip.world.Power, dip.world.TurnState, boolean, boolean)"><!-- --></A><H3>
parse</H3>
<PRE>
public <A HREF="../../dip/order/Order.html" title="class in dip.order">Order</A> <B>parse</B>(<A HREF="../../dip/order/OrderFactory.html" title="class in dip.order">OrderFactory</A>&nbsp;orderFactory,
                   java.lang.String&nbsp;text,
                   <A HREF="../../dip/world/Power.html" title="class in dip.world">Power</A>&nbsp;power,
                   <A HREF="../../dip/world/TurnState.html" title="class in dip.world">TurnState</A>&nbsp;turnState,
                   boolean&nbsp;locked,
                   boolean&nbsp;guess)
            throws <A HREF="../../dip/order/OrderException.html" title="class in dip.order">OrderException</A></PRE>
<DL>
<DD>Parse an order to an Order object.
        <p>
        There are several options to control parsing. 
        <pre>
        power:  
                        "default" power to assume; null if not required
        World:
                        current world; needed for province/power matching

        locked: 
                        if true, only orders for the specified power are legal.
                        if power==null then an IAE is thrown.
        guess:
                        only works if (power==null) and power is NOT locked
                        guesses power based upon source province
                        Position (derived from world) must be accurate; since guessing depends 
                        upon knowing the current position information, and phase information.


        States:
        
        Power           Locked  Guess   Result
        =====           ======  =====   =================================================
        null            false   false   VALID: but power must always be present in text to parse!
        null            false   true    VALID: power is based on source province, whether specified or not
        null            true    false   illegal
        null            true    true    illegal

        (defined)       false   false   VALID: power must be specified, if not, assumes "Power" given
        (defined)       false   true    VALID: if power not specified, it is based on source province
        (defined)       true    false   VALID: power *always* is "Power" given
        (defined)       true    true    illegal
        </pre>
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../dip/order/OrderException.html" title="class in dip.order">OrderException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../dip/order/OrderFormatOptions.html" title="class in dip.order"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../dip/order/OrderWarning.html" title="class in dip.order"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?dip/order/OrderParser.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="OrderParser.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
